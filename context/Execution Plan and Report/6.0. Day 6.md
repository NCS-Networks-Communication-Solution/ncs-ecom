**Constructive Demo Playthrough Report: NCS B2B App @ [http://localhost:3100/](http://localhost:3100/)**

- App bootstraps against Nest API on http://localhost:3000/api via the shared base URL wiring in both the landing page and admin console (frontend/src/app/page.tsx:8, frontend/src/components/admin/AdminContext.tsx:5).
- Backend exposes a global /api prefix with CORS enabled, so cross-origin calls from the demo host succeed when the port mapping is correct (backend/src/main.ts:6).
- Seed data provisions the admin credential, catalog categories, and seven showcase products, matching what the demo is meant to surface (backend/prisma/seed.ts:24).
- Frontend smoke script already validates /products and /auth/login, making it a good first diagnostic once the cart defect is fixed (frontend/scripts/smoke.mjs:3).

**Authentication**

- Login form drives the /auth/login flow with seeded credentials and surfaces expiry feedback in the UI (frontend/src/app/page.tsx:78).
- Service layer returns 24h JWT access tokens and 7-day refresh tokens, with bcrypt-protected storage and refresh invalidation to keep sessions clean (backend/src/auth/auth.service.ts:25, backend/src/auth/auth.service.ts:183).
- Admin console reuses the same auth endpoint, persists tokens in local storage, and scopes features by role (frontend/src/components/admin/AdminContext.tsx:63).

**Catalog Rendering**

- Catalog fetch is live against the backend API and gracefully handles pagination/array responses before presenting seeded SKUs such as SW-24P-1G and friends (frontend/src/app/page.tsx:57).
- Seed script ensures product metadata (price, bilingual names, specs, imagery) is available to the frontend (backend/prisma/seed.ts:195).
- Admin product manager lists and edits the same inventory set through authenticated endpoints (frontend/src/components/admin/ProductManager.tsx:17).

**Cart & Quantity Management**

- Cart context, service bindings, and dropdown UI are implemented end-to-end (frontend/src/contexts/CartContext.tsx:36, frontend/src/services/cartService.ts:65, frontend/src/components/cart/CartDropdown.tsx:6).
- Backend cart module exposes the expected REST surface (GET /cart, POST /cart/items, etc.) behind JWT guards (backend/src/cart/cart.controller.ts:24).
- Current demo sessions fail to persist cart state: each cart call returns an error and UI remains empty. Digging into the client code shows the error path bubbling up from the shared fetch helper (frontend/src/services/cartService.ts:38) and the context storing that message (frontend/src/contexts/CartContext.tsx:65).
- Likely culprits: a mismatched API base when the frontend runs on 3100 (ensure NEXT_PUBLIC_API_URL still points at the Nest host) or rejected bearer tokens (confirm the login response’s access token is being reused and that the backend sees the expected Authorization header). Capturing the exact error payload in the dropdown will pinpoint which case you’re hitting.

**Admin/API Smoke Checks**

- Admin dashboard, user management, and product CRUD flows are wired through a shared authenticated fetch wrapper (frontend/src/components/admin/useAdminApi.ts:7).
- Backend admin services expose overview metrics and role-gated company management endpoints (backend/src/admin/admin.service.ts:6).

**Summary — Strengths**

- Authentication and token lifecycle behave as designed for both customer and admin views (frontend/src/app/page.tsx:54).
- Catalog and admin panels surface all seeded data with search, filtering, and inline edits (frontend/src/components/admin/ProductManager.tsx:162).
- Backend modules follow clean Nest patterns with validation, Prisma transactions, and centralized exception handling (backend/src/filters/http-exception.filter.ts:1).

**Critical Issues**

- Cart add/update/remove endpoints fail from the frontend, leaving the dropdown empty and blocking the core playthrough (frontend/src/contexts/CartContext.tsx:74).
- This correlates with earlier environment notes about inconsistent port wiring—cart calls will break if the frontend is pointed at an outdated port or if Docker networking isn’t aligned (context/Execution Plan and Report/5.9. Day 5.5 HIGH PRIORITY Port Mismatch Between Frontend and Backend.md:1, context/Execution Plan and Report/5.8. Day 5.5 HIGH PRIORITY Docker Network Configuration Issues.md:5).
- Error feedback in the cart UI is minimal, so users cannot see the backend response when something goes wrong (frontend/src/components/cart/CartDropdown.tsx:37).

**Recommendations**

1. Instrument cart calls: surface the error message returned by /cart in the dropdown and log the status code so you can distinguish 401 vs 404/500 before chasing fixes (frontend/src/contexts/CartContext.tsx:65).
2. Re-verify environment configuration: confirm NEXT_PUBLIC_API_URL and Docker port mappings still route to the Nest app on 3000, as documented in the ops guide (frontend/src/services/cartService.ts:1, context/Execution Plan and Report/5.8. Day 5.5 HIGH PRIORITY Docker Network Configuration Issues.md:77).
3. Hit the cart endpoints directly with the issued access token (Postman/curl) to see whether the backend honors the JWT—if it fails, inspect the Nest guard and Prisma queries for mismatched user IDs (backend/src/cart/cart.service.ts:105).
4. Extend the existing smoke script with a cart add/check step once the underlying cause is resolved, keeping the demo regression-proof (frontend/scripts/smoke.mjs:33).
5. After fixing cart state, re-test VAT totals and quantity controls in the dropdown to ensure the UI math aligns with backend tax calculations (backend/src/cart/cart.service.ts:191).