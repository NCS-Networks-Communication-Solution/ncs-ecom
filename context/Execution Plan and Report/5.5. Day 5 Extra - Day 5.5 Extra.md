**Migration Setup**

- Your local DB isn’t running, so npx prisma migrate deploy failed with P1001. Start the database (docker compose up -d postgres redis from repo root) or point DATABASE_URL at a reachable host before rerunning.
- Seeding uses Prisma’s built-in command, not an npm script. After the database is up, run npx prisma db seed (it calls the seed defined in backend/package.json:70), then re-run the cart flows.

**Preview Automation**

- Add the preview backend URL as the PREVIEW_BASE_URL repository secret (GitHub → Settings → Secrets and variables → Actions → “New repository secret”). Use the fully qualified HTTPS URL the smoke job should hit.
- Confirm the preview environment has the seeded admin account (admin@ncs.co.th / admin123) so the smoke job and new cart endpoints authenticate successfully once the placeholder step in .github/workflows/ci.yml is activated.
- After secrets are in place and preview responds, update the smoke job to replace the placeholder with the real curl + npm run smoke sequence, then run the workflow once to validate it.

**Local Cart Integration Checks**

- Frontend cart state now lives under frontend/src/contexts/CartContext.tsx; ensure any future pages needing cart access wrap in CartProvider just like src/app/page.tsx.
- Backend cart operations are in backend/src/cart/cart.service.ts; if additional validation or totals are needed, add them before enabling checkout features.

Next steps: 1) Add the preview API URL to the PREVIEW_BASE_URL GitHub secret (include the /api base). 2) Re-run the CI workflow to confirm the new smoke stage passes; failures mean the preview isn’t reachable yet.

